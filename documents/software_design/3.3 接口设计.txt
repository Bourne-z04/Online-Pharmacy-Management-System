接口设计
1 用户接口设计
用户接口指客户端与系统交互的前端界面，覆盖微信小程序端及PC后台管理端。设计以操作便捷、信息清晰、流程统一为目标。
1.1 C端用户接口
系统为C端用户提供以下主要交互命令及反馈：
商品搜索与浏览
用户通过输入关键词或选择分类发起搜索。系统反馈商品列表，展示商品名称、规格、价格、库存情况及相关标签，支持分页浏览。搜索结果包含清晰的商品卡片布局。
商品详情查看
用户点击商品卡片进入详情页。系统展示商品图文详情、适应症说明、使用方法、实时库存状态、是否需处方标识以及用户评价内容。若为处方药，明确标注警示信息。
加入购物车
用户选择购买数量后确认加入。系统反馈"已加入购物车"提示，并同步更新购物车图标中的商品数量。
下单结算
用户提交订单并选择配送方式。系统返回订单应付金额、可用优惠信息、药师审核状态及预计送达时间。若订单包含处方药，自动触发审核流程。
在线支付
用户选择微信支付后，系统生成支付二维码或显示支付中状态。支付成功后返回"支付成功"确认，并自动跳转至订单详情页。
处方上传与审核
用户上传处方图片，系统接收后返回审核状态，包括"待审核""审核通过"或"审核驳回"，并展示药师审核备注信息。
物流查询
用户点击订单物流信息，系统展示实时配送轨迹、配送员联系方式及当前配送节点。
售后申请
用户提交退货或退款申请后，系统显示申请提交状态、商家审核结论及退款处理进度。
1.2 B端后台管理接口
系统为B端用户提供以下管理功能：
商品管理
新增商品时，系统反馈"新增成功"或"新增失败"提示。修改商品时，系统先回显原数据，保存后提示"更新成功"。
库存管理
执行入库或出库操作后，系统返回库存数量变化记录。当库存低于预设预警值时，系统自动弹出提示"库存低于预警值"。
订单处理
用户可查看订单列表并按条件筛选。系统反馈订单当前状态，包括待支付、待审核、待发货、已完成等状态标签。
处方审核
药师审核处方图片后，系统记录审核时间、审核人信息及审核结果，并同步更新订单状态。
售后处理
处理退款请求时，系统返回处理结果并自动同步至前端用户界面。
2 外部接口设计
描述系统与外部平台、设备、服务的交互方式及数据交换规范。
2.1 微信支付接口
用于完成订单支付与退款功能。采用HTTPS协议通信，数据以JSON格式交换。系统通过统一下单接口发送订单金额与订单编号，通过支付回调接口接收支付结果通知，通过退款申请接口提交退款金额及退款单号。
2.2 微信小程序平台接口
用于用户授权登录及媒体文件上传。调用微信官方API，基于HTTPS协议。登录接口获取用户openid及session_key，媒体上传接口支持处方图片上传并返回文件标识。
2.3 第三方物流平台接口
对接闪送、顺丰等即时配送平台，用于下单及物流状态查询。采用REST API架构。系统发送收货地址、商品重量及配送时效要求完成下单，通过订单号查询返回配送轨迹信息的JSON数据。
2.4 数据库管理系统接口
采用MySQL或PostgreSQL数据库，通过JDBC或ORM框架实现数据持久化。存储用户数据、商品信息、订单记录、库存状态及处方相关业务数据。
2.5 消息通知接口
集成短信或企业微信通道，用于订单状态变更提醒及审核结果通知。采用HTTP API方式，数据以JSON格式交换。
3 内部接口设计
描述系统各内部模块间的数据交互机制。
3.1 用户管理模块接口
与认证模块及订单模块对接。传递用户编号、昵称、联系方式、会员等级等用户信息，以及用户授权令牌用于身份验证。
3.2 商品与库存模块接口
与搜索模块、订单结算模块及后台管理模块交互。提供商品基本信息、当前库存数量、库存预警阈值，以及入库、出库、订单扣减等库存变更记录。
3.3 订单处理模块接口
与商品模块、支付模块、物流模块及用户模块协同。接收用户提交的订单数据，反馈订单状态变化，同步支付成功或失败信息，传递物流单号及配送状态更新。
3.4 处方审核模块接口
与订单模块及药师审核后台对接。传输处方图片链接，返回审核通过或拒绝结论及药师备注，记录完整审核日志。
3.5 售后服务模块接口
与订单模块及支付模块连接。接收退货退款申请，反馈审核进度与退款结果，同步用户寄回商品的物流信息。
3.6 系统日志与监控接口
面向所有模块提供日志记录服务。记录关键操作痕迹、异常错误信息及系统性能指标。