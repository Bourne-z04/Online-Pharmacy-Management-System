# ç™¾æƒ åº·å¤§è¯æˆ¿ç³»ç»Ÿ - å¿«é€Ÿè¿è¡Œæµç¨‹é€ŸæŸ¥è¡¨

**â±ï¸ é¢„è®¡æ—¶é—´**: 15åˆ†é’Ÿ  
**ğŸ“Œ é€‚ç”¨åœºæ™¯**: æœ¬åœ°Mockç¯å¢ƒæµ‹è¯•

---

## âš¡ è¶…å¿«é€Ÿå¯åŠ¨ï¼ˆ5æ­¥éª¤ï¼‰

### 1ï¸âƒ£ å¯åŠ¨MySQLå’ŒRedisï¼ˆ2åˆ†é’Ÿï¼‰

```bash
# Windows
net start MySQL80
redis-server.exe

# Linux/Mac
sudo service mysql start
redis-server
```

### 2ï¸âƒ£ åˆå§‹åŒ–æ•°æ®åº“ï¼ˆ2åˆ†é’Ÿï¼‰

```bash
cd C:\Users\20189\Desktop\SE\project

# æ‰§è¡Œåˆå§‹åŒ–è„šæœ¬
mysql -u root -p < online_market/backend/src/main/resources/sql/schema.sql
mysql -u root -p < business_operation/backend/src/main/resources/sql/admin_schema.sql

# æ’å…¥æµ‹è¯•æ•°æ®ï¼ˆé‡è¦ï¼ï¼‰
mysql -u root -p pharmacy_online_market
```

```sql
-- æ’å…¥æµ‹è¯•åˆ†ç±»
INSERT INTO category (category_name, parent_id, sort_order, status) VALUES
('æ„Ÿå†’å‘çƒ§', 0, 1, 1), ('è‚ èƒƒæ¶ˆåŒ–', 0, 2, 1), ('ç»´ç”Ÿç´ ', 0, 3, 1);

-- æ’å…¥æµ‹è¯•å•†å“
INSERT INTO product (product_id, product_name, category_id, specification, price, main_image, status) VALUES
('P00001', '999æ„Ÿå†’çµ', 1, '10g*9è¢‹', 15.80, '/images/p1.jpg', 1),
('P00002', 'å¥èƒƒæ¶ˆé£Ÿç‰‡', 2, '0.8g*36ç‰‡', 12.50, '/images/p2.jpg', 1),
('P00003', 'ç»´ç”Ÿç´ C', 3, '100mg*100ç‰‡', 9.90, '/images/p3.jpg', 1);

-- æ’å…¥åº“å­˜
INSERT INTO inventory (product_id, available_stock, total_stock) VALUES
('P00001', 100, 100), ('P00002', 150, 150), ('P00003', 200, 200);
```

### 3ï¸âƒ£ é…ç½®å¹¶å¯åŠ¨åç«¯ï¼ˆ5åˆ†é’Ÿï¼‰

**ä¿®æ”¹é…ç½®**ï¼ˆä¸¤ä¸ªæ–‡ä»¶éƒ½è¦æ”¹ï¼‰:
- `online_market/backend/src/main/resources/application.yml`
- `business_operation/backend/src/main/resources/application.yml`

```yaml
spring:
  datasource:
    password: ä½ çš„MySQLå¯†ç   # ğŸ‘ˆ åªéœ€æ”¹è¿™ä¸€è¡Œ
```

**å¯åŠ¨Cç«¯åç«¯**ï¼ˆç»ˆç«¯1ï¼‰:
```bash
cd online_market/backend
mvn spring-boot:run
```

**å¯åŠ¨Bç«¯åç«¯**ï¼ˆç»ˆç«¯2ï¼‰:
```bash
cd business_operation/backend
mvn spring-boot:run
```

### 4ï¸âƒ£ å¯åŠ¨å‰ç«¯ï¼ˆ3åˆ†é’Ÿï¼‰

**Cç«¯å°ç¨‹åº**:
1. æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·
2. å¯¼å…¥é¡¹ç›® â†’ é€‰æ‹© `online_market/frontend`
3. å‹¾é€‰"ä¸æ ¡éªŒåˆæ³•åŸŸå"
4. ç¼–è¯‘

**Bç«¯ç®¡ç†åå°**ï¼ˆç»ˆç«¯3ï¼‰:
```bash
cd business_operation/frontend
npm install  # é¦–æ¬¡éœ€è¦
npm run dev
```
è®¿é—®ï¼šhttp://localhost:3000

### 5ï¸âƒ£ éªŒè¯è¿è¡Œï¼ˆ3åˆ†é’Ÿï¼‰

#### éªŒè¯Cç«¯
æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:8080/api/category/list
åº”è¯¥è¿”å›åˆ†ç±»JSONæ•°æ®

#### éªŒè¯Bç«¯
æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:3000
åº”è¯¥çœ‹åˆ°ç™»å½•é¡µé¢

#### ç™»å½•æµ‹è¯•
- **Cç«¯**ï¼šå¾®ä¿¡å°ç¨‹åºä¼šè‡ªåŠ¨Mockç™»å½•
- **Bç«¯**ï¼šadmin / admin123

---

## ğŸ§ª å¿«é€Ÿæµ‹è¯•ç”¨ä¾‹

### æµ‹è¯•1ï¼šCç«¯ç™»å½•å¹¶æµè§ˆå•†å“ï¼ˆPostmanï¼‰

```bash
# 1. ç™»å½•
POST http://localhost:8080/api/auth/wechat/login
Content-Type: application/json

{
  "code": "test_123",
  "nickname": "æµ‹è¯•ç”¨æˆ·"
}

# å¤åˆ¶è¿”å›çš„token

# 2. è·å–å•†å“åˆ—è¡¨
GET http://localhost:8080/api/product/list?page=1&size=20

# 3. æœç´¢å•†å“
POST http://localhost:8080/api/product/search
Content-Type: application/json

{
  "keyword": "æ„Ÿå†’"
}
```

### æµ‹è¯•2ï¼šæ·»åŠ è´­ç‰©è½¦å¹¶ä¸‹å•

```bash
# 1. æ·»åŠ è´­ç‰©è½¦
POST http://localhost:8080/api/cart
Authorization: Bearer {ä½ çš„token}
Content-Type: application/json

{
  "productId": "P00001",
  "quantity": 2
}

# 2. æ·»åŠ åœ°å€
POST http://localhost:8080/api/address
Authorization: Bearer {ä½ çš„token}
Content-Type: application/json

{
  "receiverName": "å¼ ä¸‰",
  "receiverPhone": "13800138000",
  "province": "æµ™æ±Ÿçœ",
  "city": "æ­å·å¸‚",
  "district": "è¥¿æ¹–åŒº",
  "detailAddress": "æ–‡ä¸‰è·¯123å·",
  "isDefault": 1
}

# 3. åˆ›å»ºè®¢å•
POST http://localhost:8080/api/order/create
Authorization: Bearer {ä½ çš„token}
Content-Type: application/json

{
  "addressId": 1,
  "deliveryMethod": "COURIER",
  "deliveryTimeSlot": "09:00-12:00",
  "cartIds": [1]
}
```

### æµ‹è¯•3ï¼šBç«¯ç®¡ç†å‘˜ç™»å½•

```bash
POST http://localhost:8081/admin-api/auth/login
Content-Type: application/json

{
  "username": "admin",
  "password": "admin123"
}
```

---

## âš ï¸ å¸¸è§é”™è¯¯é€ŸæŸ¥

| é”™è¯¯ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| æ•°æ®åº“è¿æ¥å¤±è´¥ | MySQLæœªå¯åŠ¨ | `net start MySQL80` |
| Redisè¿æ¥å¤±è´¥ | Redisæœªå¯åŠ¨ | `redis-server` |
| ç«¯å£8080è¢«å ç”¨ | å…¶ä»–ç¨‹åºå ç”¨ | æ”¹ `application.yml` ç«¯å£ |
| å•†å“åˆ—è¡¨ä¸ºç©º | æœªæ’å…¥æµ‹è¯•æ•°æ® | æ‰§è¡Œæ­¥éª¤2ä¸­çš„INSERTè¯­å¥ |
| Tokenè¿‡æœŸ | Tokenæœ‰æ•ˆæœŸ7å¤© | é‡æ–°ç™»å½•è·å–æ–°Token |
| Mavenä¸‹è½½æ…¢ | ç½‘ç»œé—®é¢˜ | é…ç½®é˜¿é‡Œäº‘é•œåƒ |

---

## ğŸ“Š ç³»ç»Ÿè¿è¡ŒçŠ¶æ€æ£€æŸ¥

### æ£€æŸ¥å‘½ä»¤

```bash
# æ£€æŸ¥MySQL
mysql -u root -p -e "SELECT 1"

# æ£€æŸ¥Redis
redis-cli ping

# æ£€æŸ¥Cç«¯åç«¯
curl http://localhost:8080/api/category/list

# æ£€æŸ¥Bç«¯åç«¯
curl http://localhost:8081/admin-api/auth/login

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -ano | findstr :8080
netstat -ano | findstr :8081
```

### æ­£å¸¸çŠ¶æ€æ ‡å¿—

âœ… MySQLå¯ä»¥è¿æ¥  
âœ… Redisè¿”å›PONG  
âœ… Cç«¯è¿”å›JSONæ•°æ®  
âœ… Bç«¯è¿”å›è®¤è¯å¤±è´¥ï¼ˆæ­£å¸¸ï¼Œå› ä¸ºæœªç™»å½•ï¼‰  
âœ… ç«¯å£8080ã€8081è¢«Javaè¿›ç¨‹å ç”¨  

---

## ğŸ¯ æœ€å°å¯è¿è¡Œé…ç½®

å¦‚æœåªæƒ³å¿«é€Ÿçœ‹åˆ°æ•ˆæœï¼Œæœ€å°é…ç½®ï¼š

### åªå¯åŠ¨Cç«¯

```bash
# 1. å¯åŠ¨MySQL + Redis
# 2. åˆå§‹åŒ–æ•°æ®åº“ + æ’å…¥æµ‹è¯•æ•°æ®
# 3. å¯åŠ¨Cç«¯åç«¯
cd online_market/backend
mvn spring-boot:run

# 4. æµ‹è¯•
curl http://localhost:8080/api/product/list?page=1&size=20
```

### åªå¯åŠ¨Bç«¯

```bash
# 1. å¯åŠ¨MySQLï¼ˆä¸éœ€è¦Redisï¼‰
# 2. åˆå§‹åŒ–æ•°æ®åº“
# 3. å¯åŠ¨Bç«¯åç«¯
cd business_operation/backend
mvn spring-boot:run

# 4. å¯åŠ¨Bç«¯å‰ç«¯
cd business_operation/frontend
npm install && npm run dev

# 5. è®¿é—® http://localhost:3000
# ç™»å½•ï¼šadmin / admin123
```

---

## ğŸ“± å¾®ä¿¡å°ç¨‹åºMockè¯´æ˜

### è‡ªåŠ¨Mockç‰¹æ€§

å°ç¨‹åºä¸­çš„å¾®ä¿¡APIè°ƒç”¨ä¼šè‡ªåŠ¨ä½¿ç”¨Mockæ•°æ®ï¼š

**wx.login()**:
- Mockè¿”å› code: `test_openid_timestamp`
- æ— éœ€çœŸå®å¾®ä¿¡AppID

**wx.getUserProfile()**:
- Mockè¿”å›ç”¨æˆ·ä¿¡æ¯
- æ— éœ€ç”¨æˆ·æˆæƒ

**wx.request()**:
- æ­£å¸¸è°ƒç”¨åç«¯API
- éœ€è¦å‹¾é€‰"ä¸æ ¡éªŒåˆæ³•åŸŸå"

**wx.uploadFile()**:
- æ­£å¸¸ä¸Šä¼ åˆ°åç«¯
- æ–‡ä»¶ä¿å­˜åœ¨æœ¬åœ°uploadç›®å½•

### å°ç¨‹åºè°ƒè¯•æŠ€å·§

1. **æŸ¥çœ‹ç½‘ç»œè¯·æ±‚**: è°ƒè¯•å™¨ â†’ Network
2. **æŸ¥çœ‹Storage**: è°ƒè¯•å™¨ â†’ Storage
3. **æŸ¥çœ‹Console**: è°ƒè¯•å™¨ â†’ Console
4. **æ¸…é™¤ç¼“å­˜**: æ¸…ç¼“å­˜ â†’ å…¨éƒ¨æ¸…é™¤

---

## ğŸ¬ æ¼”ç¤ºåœºæ™¯è„šæœ¬

### åœºæ™¯1ï¼šæ–°ç”¨æˆ·è´­ç‰©æµç¨‹ï¼ˆ5åˆ†é’Ÿï¼‰

```
1. æ‰“å¼€å¾®ä¿¡å°ç¨‹åº
   â†’ è‡ªåŠ¨Mockç™»å½•
   
2. æµè§ˆé¦–é¡µ
   â†’ çœ‹åˆ°å•†å“åˆ—è¡¨
   â†’ ç‚¹å‡»æœç´¢ï¼Œæœç´¢"æ„Ÿå†’"
   
3. ç‚¹å‡»å•†å“è¯¦æƒ…
   â†’ æŸ¥çœ‹å•†å“ä¿¡æ¯
   â†’ ç‚¹å‡»"åŠ å…¥è´­ç‰©è½¦"
   
4. è¿›å…¥è´­ç‰©è½¦
   â†’ ä¿®æ”¹æ•°é‡ä¸º3
   â†’ ç‚¹å‡»"å»ç»“ç®—"
   
5. é€‰æ‹©æ”¶è´§åœ°å€
   â†’ ç‚¹å‡»"æ·»åŠ åœ°å€"
   â†’ å¡«å†™åœ°å€ä¿¡æ¯
   
6. åˆ›å»ºè®¢å•
   â†’ é€‰æ‹©é…é€æ–¹å¼
   â†’ ç‚¹å‡»"ç«‹å³æ”¯ä»˜"
   
7. æŸ¥çœ‹è®¢å•
   â†’ "æˆ‘çš„" â†’ "æˆ‘çš„è®¢å•"
   â†’ æŸ¥çœ‹è®¢å•è¯¦æƒ…
```

### åœºæ™¯2ï¼šç®¡ç†å‘˜ç®¡ç†å•†å“ï¼ˆ3åˆ†é’Ÿï¼‰

```
1. æ‰“å¼€æµè§ˆå™¨ http://localhost:3000
   â†’ è¾“å…¥ admin / admin123
   â†’ ç‚¹å‡»ç™»å½•
   
2. æŸ¥çœ‹é¦–é¡µ
   â†’ çœ‹åˆ°æ•°æ®çœ‹æ¿
   
3. ç‚¹å‡»"å•†å“ç®¡ç†"
   â†’ çœ‹åˆ°å•†å“åˆ—è¡¨
   â†’ ç‚¹å‡»"ä¸Šæ¶/ä¸‹æ¶"æŒ‰é’®
   
4. ç‚¹å‡»"è®¢å•ç®¡ç†"
   â†’ çœ‹åˆ°è®¢å•åˆ—è¡¨
   â†’ ç­›é€‰"å¾…å‘è´§"è®¢å•
   
5. ç‚¹å‡»"é”€å”®ç»Ÿè®¡"
   â†’ çœ‹åˆ°é”€å”®æ•°æ®
   â†’ åˆ‡æ¢"æ—¥/å‘¨/æœˆ"
```

---

## ğŸ“– Mockæ•°æ®è¯´æ˜

### ç”¨æˆ·æ•°æ®
- Mockç™»å½•ä¼šè‡ªåŠ¨åˆ›å»ºç”¨æˆ·
- ç”¨æˆ·IDæ ¼å¼ï¼š`U + é›ªèŠ±ID`
- OpenIDæ ¼å¼ï¼š`test_openid_timestamp`

### å•†å“æ•°æ®
- éœ€è¦æ‰‹åŠ¨æ’å…¥ï¼ˆè§æ­¥éª¤2ï¼‰
- å·²æä¾›5ä¸ªæµ‹è¯•å•†å“

### è®¢å•æ•°æ®
- é€šè¿‡APIåˆ›å»º
- è®¢å•å·æ ¼å¼ï¼š`BD2024XXXXXXXX`

### ç‰©æµæ•°æ®
- è¿”å›Mockè½¨è¿¹
- éª‘æ‰‹ä¿¡æ¯ä¸ºæ¨¡æ‹Ÿæ•°æ®

---

## ğŸ“ å­¦ä¹ å»ºè®®

### 1. å…ˆè¿è¡Œï¼Œå†å­¦ä¹ 

1. æŒ‰ç…§æœ¬æ–‡æ¡£å¯åŠ¨ç³»ç»Ÿ
2. æµ‹è¯•æ‰€æœ‰æ¥å£
3. æŸ¥çœ‹æ•°æ®åº“å˜åŒ–
4. é˜…è¯»ä»£ç å®ç°

### 2. æ¨èå­¦ä¹ è·¯å¾„

1. **æ•°æ®åº“è®¾è®¡** â†’ æŸ¥çœ‹ `schema.sql`
2. **åç«¯æ¶æ„** â†’ æŸ¥çœ‹ Controller â†’ Service â†’ Mapper
3. **å‰ç«¯æ¡†æ¶** â†’ æŸ¥çœ‹ request.js â†’ é¡µé¢ç»„ä»¶
4. **ä¸šåŠ¡é€»è¾‘** â†’ æŸ¥çœ‹ Serviceå®ç°ç±»
5. **æŠ€æœ¯äº®ç‚¹** â†’ æŸ¥çœ‹ä¹è§‚é”ã€ç¼“å­˜ã€è®¤è¯å®ç°

---

## ğŸ’¡ è¿è¡Œæç¤º

### ç¬¬ä¸€æ¬¡è¿è¡Œ

1. âœ… ç¡®ä¿æ’å…¥æµ‹è¯•æ•°æ®
2. âœ… ä½¿ç”¨Postmanæµ‹è¯•API
3. âœ… æŸ¥çœ‹æ—¥å¿—ç¡®è®¤æ— é”™è¯¯
4. âœ… éªŒè¯æ•°æ®åº“æ•°æ®æ­£ç¡®

### åç»­è¿è¡Œ

åªéœ€å¯åŠ¨æœåŠ¡å³å¯ï¼š
```bash
# ç»ˆç«¯1
cd online_market/backend && mvn spring-boot:run

# ç»ˆç«¯2ï¼ˆå¯é€‰ï¼‰
cd business_operation/backend && mvn spring-boot:run

# ç»ˆç«¯3ï¼ˆå¯é€‰ï¼‰
cd business_operation/frontend && npm run dev
```

---

## âœ… è¿è¡ŒæˆåŠŸæ ‡å¿—

çœ‹åˆ°ä»¥ä¸‹å†…å®¹è¯´æ˜è¿è¡ŒæˆåŠŸï¼š

### åç«¯å¯åŠ¨æˆåŠŸ
```
========================================
ç™¾æƒ åº·å¤§è¯æˆ¿åœ¨çº¿å•†åŸåç«¯æœåŠ¡å¯åŠ¨æˆåŠŸï¼
========================================
```

### æ¥å£æµ‹è¯•æˆåŠŸ
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": [...]
}
```

### å°ç¨‹åºè¿è¡ŒæˆåŠŸ
- ç¼–è¯‘æ— é”™è¯¯
- é¦–é¡µæ˜¾ç¤ºæ­£å¸¸
- å¯ä»¥çœ‹åˆ°å•†å“åˆ—è¡¨

### Vueåå°è¿è¡ŒæˆåŠŸ
- æµè§ˆå™¨æ‰“å¼€ç™»å½•é¡µ
- å¯ä»¥æ­£å¸¸ç™»å½•
- é¡µé¢æ— æŠ¥é”™

---

## ğŸ“ å¿«é€Ÿæ±‚åŠ©

é‡åˆ°é—®é¢˜æ—¶ï¼ŒæŒ‰é¡ºåºæ£€æŸ¥ï¼š

1. âœ… MySQLæ˜¯å¦å¯åŠ¨
2. âœ… Redisæ˜¯å¦å¯åŠ¨
3. âœ… é…ç½®æ–‡ä»¶ä¸­çš„å¯†ç æ˜¯å¦æ­£ç¡®
4. âœ… æ˜¯å¦æ’å…¥äº†æµ‹è¯•æ•°æ®
5. âœ… ç«¯å£æ˜¯å¦è¢«å ç”¨
6. âœ… æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶

è¯¦ç»†è§£å†³æ–¹æ¡ˆï¼š[ğŸ“– Mockç¯å¢ƒè¿è¡ŒæŒ‡å—](Mockç¯å¢ƒè¿è¡ŒæŒ‡å—.md)

---

**æˆåŠŸè¿è¡Œåï¼Œæ‚¨å¯ä»¥**:
- âœ… æµ‹è¯•æ‰€æœ‰åŠŸèƒ½
- âœ… æŸ¥çœ‹å®Œæ•´è´­ç‰©æµç¨‹
- âœ… æ¼”ç¤ºç³»ç»ŸåŠŸèƒ½
- âœ… å­¦ä¹ ä»£ç å®ç°

---

**ç™¾æƒ åº·å¤§è¯æˆ¿ Â© 2024**







