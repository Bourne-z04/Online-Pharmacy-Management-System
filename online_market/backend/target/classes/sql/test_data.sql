-- 百惠康大药房测试数据脚本
-- 用于Mock环境测试

USE pharmacy_online_market;

-- 清空现有数据
SET FOREIGN_KEY_CHECKS = 0;
TRUNCATE TABLE search_history;
TRUNCATE TABLE consultation_message;
TRUNCATE TABLE consultation_session;
TRUNCATE TABLE logistics_track;
TRUNCATE TABLE logistics;
TRUNCATE TABLE after_sale;
TRUNCATE TABLE order_item;
TRUNCATE TABLE order_main;
TRUNCATE TABLE prescription;
TRUNCATE TABLE cart;
TRUNCATE TABLE user_address;
TRUNCATE TABLE user;
TRUNCATE TABLE inventory_log;
TRUNCATE TABLE inventory;
TRUNCATE TABLE product;
TRUNCATE TABLE category;
SET FOREIGN_KEY_CHECKS = 1;

-- =====================================================
-- 1. 商品分类数据
-- =====================================================
INSERT INTO `category` (`id`, `category_name`, `parent_id`, `sort_order`, `icon`, `status`) VALUES
(1, '感冒用药', 0, 1, '', 1),
(2, '肠胃用药', 0, 2, '', 1),
(3, '心脑血管', 0, 3, '', 1),
(4, '皮肤用药', 0, 4, '', 1),
(5, '维生素', 0, 5, '', 1),
(6, '医疗器械', 0, 6, '', 1),
(7, '中药材', 0, 7, '', 1),
(8, '保健品', 0, 8, '', 1);

-- =====================================================
-- 2. 商品数据（20个测试商品）
-- =====================================================
INSERT INTO `product` (`product_id`, `product_name`, `category_id`, `brand`, `specification`, `unit`, `price`, `original_price`, `description`, `main_image`, `is_prescription`, `manufacturer`, `approval_number`, `indication`, `usage`, `taboo`, `sales_volume`, `status`) VALUES
-- 感冒用药
('P00001', '999感冒灵颗粒', 1, '999', '10g*9袋', '盒', 15.80, 18.00, '解热镇痛。用于感冒引起的头痛，发热，鼻塞，流涕，咽痛等。', 'https://img.example.com/ganmaoling.jpg', 0, '华润三九医药股份有限公司', '国药准字Z44021940', '解热镇痛。用于感冒引起的头痛，发热，鼻塞。', '开水冲服。一次1袋，一日3次。', '孕妇慎用。', 1523, 1),
('P00002', '连花清瘟胶囊', 1, '以岭', '0.35g*24粒', '盒', 26.50, 29.00, '清瘟解毒，宣肺泄热。用于治疗流行性感冒。', 'https://img.example.com/lianhua.jpg', 0, '石家庄以岭药业股份有限公司', '国药准字Z20040063', '清瘟解毒，宣肺泄热。用于流感症状。', '口服。一次4粒，一日3次。', '过敏体质者慎用。', 2156, 1),
('P00003', '小儿氨酚黄那敏颗粒', 1, '哈药', '5g*10袋', '盒', 12.00, 14.00, '适用于缓解儿童普通感冒及流行性感冒引起的发热、头痛等症状。', 'https://img.example.com/xiaoer.jpg', 0, '哈药集团三精制药有限公司', '国药准字H23021166', '用于缓解儿童感冒症状。', '温开水冲服。1-2岁儿童，一次半袋，一日2次。', '新生儿及早产儿禁用。', 897, 1),
-- 肠胃用药
('P00004', '吗丁啉', 2, '西安杨森', '10mg*30片', '盒', 32.00, 35.00, '用于消化不良、腹胀、嗳气、恶心、呕吐等症状。', 'https://img.example.com/motilium.jpg', 0, '西安杨森制药有限公司', '国药准字H10910003', '用于功能性消化不良。', '口服。成人一次1片，一日3次，饭前15-30分钟服用。', '胃肠道出血、穿孔患者禁用。', 1234, 1),
('P00005', '健胃消食片', 2, '江中', '0.8g*32片', '盒', 18.50, 20.00, '健胃消食。用于脾胃虚弱所致的食积。', 'https://img.example.com/jianwei.jpg', 0, '江中药业股份有限公司', '国药准字Z36020065', '用于消化不良，食欲不振。', '口服。咀嚼后咽下。成人一次3片，一日3次。', '糖尿病患者禁用。', 3456, 1),
('P00006', '蒙脱石散', 2, '博福-益普生', '3g*10袋', '盒', 28.00, 31.00, '用于成人及儿童急、慢性腹泻。', 'https://img.example.com/montuo.jpg', 0, '扬子江药业集团有限公司', '国药准字H20000690', '成人及儿童急、慢性腹泻。', '口服。成人每次1袋，一日3次。儿童减半。', '对本品过敏者禁用。', 1876, 1),
-- 心脑血管
('P00007', '阿司匹林肠溶片', 3, '拜耳', '100mg*30片', '盒', 22.50, 25.00, '用于预防心肌梗死和中风的复发。', 'https://img.example.com/aspirin.jpg', 1, '拜耳医药保健有限公司', '国药准字H20050059', '用于心脑血管疾病的预防。', '口服。一次100mg，一日1次。', '活动性溃疡病患者禁用。', 2345, 1),
('P00008', '硝酸甘油片', 3, '北京益民', '0.5mg*100片', '瓶', 6.50, 8.00, '用于冠心病心绞痛的治疗及预防。', 'https://img.example.com/nitroglycerin.jpg', 1, '北京益民药业有限公司', '国药准字H11020123', '用于冠心病心绞痛的治疗。', '舌下含服。一次0.5-1mg。', '青光眼患者禁用。', 987, 1),
('P00009', '辛伐他汀片', 3, '齐鲁', '20mg*14片', '盒', 35.00, 38.00, '用于高胆固醇血症的治疗。', 'https://img.example.com/simvastatin.jpg', 1, '齐鲁制药有限公司', '国药准字H20083819', '用于降低血脂。', '口服。一次20mg，一日1次，晚间服用。', '活动性肝病患者禁用。', 1567, 1),
-- 皮肤用药
('P00010', '皮炎平软膏', 4, '999', '15g', '支', 13.50, 15.00, '用于局限性瘙痒症、神经性皮炎、接触性皮炎等。', 'https://img.example.com/piyanping.jpg', 0, '华润三九医药股份有限公司', '国药准字H44021162', '用于各类皮炎、湿疹。', '外用。取适量涂于患处，一日2-3次。', '病毒性皮肤病患者禁用。', 2876, 1),
('P00011', '红霉素软膏', 4, '亚宝', '10g', '支', 2.50, 3.00, '用于脓疱疮等化脓性皮肤病。', 'https://img.example.com/erythromycin.jpg', 0, '亚宝药业集团股份有限公司', '国药准字H14022821', '用于化脓性皮肤感染。', '外用。取适量涂于患处，一日2次。', '对本品过敏者禁用。', 3456, 1),
-- 维生素
('P00012', '维生素C片', 5, '华北制药', '100mg*100片', '瓶', 8.00, 10.00, '用于预防坏血病，也可用于各种急慢性传染疾病。', 'https://img.example.com/vitc.jpg', 0, '华北制药股份有限公司', '国药准字H13023825', '用于补充维生素C。', '口服。成人一次1-2片，一日3次。', '尿酸盐、胱氨酸盐及半胱氨酸结石患者慎用。', 4567, 1),
('P00013', '21金维他', 5, '杭州民生', '60片', '瓶', 22.00, 25.00, '营养补充剂。用于预防因维生素和微量元素缺乏所引起的各种疾病。', 'https://img.example.com/21vita.jpg', 0, '杭州民生药业有限公司', '国药准字H33020074', '用于补充多种维生素和矿物质。', '口服。成人一日1片。', '慢性肾功能衰竭患者禁用。', 2345, 1),
-- 医疗器械
('P00014', '一次性医用口罩', 6, '稳健', '50只装', '盒', 35.00, 40.00, '用于普通医疗环境下的一次性卫生护理。', 'https://img.example.com/mask.jpg', 0, '稳健医疗用品股份有限公司', '粤械注准20202140267', '用于医疗环境下的卫生防护。', '佩戴时将口罩罩住口鼻，挂于双耳。', '严重呼吸困难者禁用。', 8765, 1),
('P00015', '电子体温计', 6, '欧姆龙', '1支', '盒', 45.00, 50.00, '用于测量人体体温。', 'https://img.example.com/thermometer.jpg', 0, '欧姆龙（大连）有限公司', '辽械注准20172200359', '用于测量体温。', '测量腋下或口腔温度，保持3-5分钟。', '无', 1234, 1),
-- 中药材
('P00016', '三七粉', 7, '云南白药', '100g', '瓶', 88.00, 95.00, '散瘀止血，消肿定痛。用于各种出血症。', 'https://img.example.com/sanqi.jpg', 0, '云南白药集团股份有限公司', '国药准字Z53021665', '散瘀止血，消肿定痛。', '口服。一次1-3g，一日2-3次。', '孕妇禁用。', 2109, 1),
('P00017', '枸杞子', 7, '百瑞源', '250g', '袋', 45.00, 50.00, '滋补肝肾，益精明目。用于虚劳精亏，腰膝酸痛。', 'https://img.example.com/gouqi.jpg', 0, '宁夏百瑞源枸杞产业有限公司', '宁药制字Z20150001', '滋补肝肾，益精明目。', '口服。泡水或煮粥，一次10-15g。', '外邪实热者禁用。', 3456, 1),
-- 保健品
('P00018', '汤臣倍健蛋白粉', 8, '汤臣倍健', '450g', '罐', 198.00, 220.00, '增强免疫力。适用于免疫力低下者。', 'https://img.example.com/protein.jpg', 0, '汤臣倍健股份有限公司', '国食健字G20150520', '增强免疫力。', '温水冲服。每次10g，每日1-2次。', '婴幼儿、孕妇慎用。', 4567, 1),
('P00019', '钙尔奇碳酸钙D3片', 8, '惠氏', '60片', '瓶', 68.00, 75.00, '用于妊娠和哺乳期妇女、更年期妇女、老年人等的钙补充剂。', 'https://img.example.com/caltrate.jpg', 0, '惠氏制药有限公司', '国药准字H10950029', '补钙。', '口服。一次1片，一日1-2次。', '高钙血症患者禁用。', 2890, 1),
('P00020', '善存多维元素片', 8, '辉瑞', '100片', '瓶', 128.00, 140.00, '补充多种维生素和矿物质。', 'https://img.example.com/centrum.jpg', 0, '辉瑞制药有限公司', '国药准字H10950027', '用于预防和治疗因维生素与矿物质缺乏所引起的各种疾病。', '口服。成人一日1片。', '慢性肾功能衰竭患者禁用。', 3210, 1);

-- =====================================================
-- 3. 库存数据
-- =====================================================
INSERT INTO `inventory` (`product_id`, `total_stock`, `available_stock`, `frozen_stock`, `warning_stock`) VALUES
('P00001', 500, 500, 0, 50),
('P00002', 400, 400, 0, 50),
('P00003', 300, 300, 0, 30),
('P00004', 350, 350, 0, 40),
('P00005', 600, 600, 0, 60),
('P00006', 250, 250, 0, 30),
('P00007', 200, 200, 0, 20),
('P00008', 150, 150, 0, 15),
('P00009', 180, 180, 0, 20),
('P00010', 450, 450, 0, 50),
('P00011', 800, 800, 0, 80),
('P00012', 1000, 1000, 0, 100),
('P00013', 350, 350, 0, 40),
('P00014', 2000, 2000, 0, 200),
('P00015', 120, 120, 0, 15),
('P00016', 180, 180, 0, 20),
('P00017', 300, 300, 0, 30),
('P00018', 150, 150, 0, 20),
('P00019', 250, 250, 0, 30),
('P00020', 200, 200, 0, 25);

-- =====================================================
-- 4. 测试用户数据（Mock环境自动生成）
-- =====================================================
INSERT INTO `user` (`user_id`, `open_id`, `nickname`, `avatar`, `gender`, `phone`, `status`) VALUES
('U2024001', 'mock_openid_001', '测试用户001', 'https://img.example.com/avatar1.jpg', 1, '13800138001', 1),
('U2024002', 'mock_openid_002', '测试用户002', 'https://img.example.com/avatar2.jpg', 2, '13800138002', 1);

-- =====================================================
-- 5. 测试地址数据
-- =====================================================
INSERT INTO `user_address` (`user_id`, `receiver_name`, `receiver_phone`, `province`, `city`, `district`, `detail_address`, `is_default`) VALUES
('U2024001', '张三', '13800138001', '浙江省', '杭州市', '西湖区', '文三路123号', 1),
('U2024001', '张三', '13800138001', '浙江省', '杭州市', '滨江区', '江南大道456号', 0),
('U2024002', '李四', '13800138002', '广东省', '深圳市', '南山区', '科技园路789号', 1);

-- =====================================================
-- 完成提示
-- =====================================================
SELECT '========================' as '';
SELECT '测试数据导入成功！' as '提示';
SELECT '========================' as '';
SELECT CONCAT('商品分类：', COUNT(*), '条') as '统计' FROM category;
SELECT CONCAT('商品信息：', COUNT(*), '条') as '' FROM product;
SELECT CONCAT('库存信息：', COUNT(*), '条') as '' FROM inventory;
SELECT CONCAT('测试用户：', COUNT(*), '条') as '' FROM user;
SELECT CONCAT('测试地址：', COUNT(*), '条') as '' FROM user_address;
SELECT '========================' as '';

